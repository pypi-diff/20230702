# Comparing `tmp/poetry_plugin_package_info-0.2.3.tar.gz` & `tmp/poetry_plugin_package_info-0.2.4.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "tmp.tar", last modified: Sat Jul  1 23:09:10 2023, max compression
+gzip compressed data, was "tmp.tar", last modified: Sun Jul  2 00:11:40 2023, max compression
```

## Comparing `poetry_plugin_package_info-0.2.3.tar` & `poetry_plugin_package_info-0.2.4.tar`

### file list

```diff
@@ -1,13 +1,13 @@
--rw-r--r--   0        0        0     1066 2023-07-01 23:08:48.627092 poetry_plugin_package_info-0.2.3/LICENSE
--rw-r--r--   0        0        0     8017 2023-07-01 23:08:48.627092 poetry_plugin_package_info-0.2.3/README.md
--rw-r--r--   0        0        0     1131 2023-07-01 23:08:48.627092 poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/__init__.py
--rw-r--r--   0        0        0    95091 2023-07-01 23:08:48.631091 poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/_zipfile.py
--rw-r--r--   0        0        0     1170 2023-07-01 23:08:48.631091 poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/formatters/__init__.py
--rw-r--r--   0        0        0      814 2023-07-01 23:08:48.631091 poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/formatters/black.py
--rw-r--r--   0        0        0     1172 2023-07-01 23:08:48.631091 poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/generators/__init__.py
--rw-r--r--   0        0        0     8024 2023-07-01 23:08:48.631091 poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/generators/git.py
--rw-r--r--   0        0        0     3149 2023-07-01 23:08:48.631091 poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/generators/project.py
--rw-r--r--   0        0        0    35728 2023-07-01 23:08:48.631091 poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/plugin.py
--rw-r--r--   0        0        0     4234 2023-07-01 23:08:48.631091 poetry_plugin_package_info-0.2.3/pyproject.toml
--rw-r--r--   0        0        0     9669 1970-01-01 00:00:00.000000 poetry_plugin_package_info-0.2.3/PKG-INFO
+-rw-r--r--   0        0        0     1066 2023-07-02 00:11:12.483218 poetry_plugin_package_info-0.2.4/LICENSE
+-rw-r--r--   0        0        0     8017 2023-07-02 00:11:12.483218 poetry_plugin_package_info-0.2.4/README.md
+-rw-r--r--   0        0        0     1131 2023-07-02 00:11:12.483218 poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/__init__.py
+-rw-r--r--   0        0        0    95091 2023-07-02 00:11:12.487218 poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/_zipfile.py
+-rw-r--r--   0        0        0     1170 2023-07-02 00:11:12.487218 poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/formatters/__init__.py
+-rw-r--r--   0        0        0      814 2023-07-02 00:11:12.487218 poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/formatters/black.py
+-rw-r--r--   0        0        0     1172 2023-07-02 00:11:12.487218 poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/generators/__init__.py
+-rw-r--r--   0        0        0     8024 2023-07-02 00:11:12.487218 poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/generators/git.py
+-rw-r--r--   0        0        0     3149 2023-07-02 00:11:12.487218 poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/generators/project.py
+-rw-r--r--   0        0        0    37009 2023-07-02 00:11:12.487218 poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/plugin.py
+-rw-r--r--   0        0        0     4234 2023-07-02 00:11:12.487218 poetry_plugin_package_info-0.2.4/pyproject.toml
+-rw-r--r--   0        0        0     9669 1970-01-01 00:00:00.000000 poetry_plugin_package_info-0.2.4/PKG-INFO
 -rw-r--r--   0        0        0     2684 1970-01-01 00:00:00.000000 poetry_plugin_package_info/package_info.py
```

### poetry_plugin_package_info/package_info.py

```diff
@@ -1,15 +1,15 @@
-"""Auto-generated by poetry-plugin-package-info at 2023-07-01T23:09:09."""
+"""Auto-generated by poetry-plugin-package-info at 2023-07-02T00:11:40."""
 import datetime
 
 
 class PackageInfo:
     project_name: str | None = "poetry-plugin-package-info"
     project_description: str | None = "Plugin for poetry that creates/updates an package_info.py file with various details about the project/package."
-    project_version: str | None = "0.2.3"
+    project_version: str | None = "0.2.4"
     project_authors: list[str] | None = ["Ben Ellis <ben.ellis@softweyr.co.uk>"]
     project_license: str | None = "MIT"
     project_classifiers: list[str] | None = [
         "Intended Audience :: Developers",
         "Intended Audience :: Information Technology",
         "Intended Audience :: System Administrators",
         "Operating System :: OS Independent",
@@ -36,21 +36,21 @@
     )
     project_repository: str | None = None
     project_homepage: str | None = (
         "https://github.com/bellis/poetry-plugin-package-info"
     )
     project_maintainers: list[str] | None = None
     project_keywords: list[str] | None = None
-    git_commit_id: str | None = "d3362e4ffb3810f1cadbde635017655ac138cdab"
+    git_commit_id: str | None = "6a3a0f5a2d7cd0b56bb77a034cb2a4ad92f17c4f"
     git_commit_author_name: str | None = "Ben Ellis"
     git_commit_author_email: str | None = "ben.ellis@softweyr.co.uk"
     git_commit_timestamp: datetime.datetime | None = datetime.datetime.fromisoformat(
-        "2023-07-02T00:06:41+01:00"
+        "2023-07-02T01:09:35+01:00"
     )
     git_branch_name: str | None = None
     git_branch_path: str | None = None
-    git_tags: list[str] | None = ["v0.2.3"]
+    git_tags: list[str] | None = ["v0.2.4"]
     git_is_dirty: bool | None = False
     git_is_dirty_excluding_untracked: bool | None = False
     git_has_staged_changes: bool | None = False
     git_has_unstaged_changes: bool | None = False
     git_has_untracked_changes: bool | None = False
```

### Comparing `poetry_plugin_package_info-0.2.3/LICENSE` & `poetry_plugin_package_info-0.2.4/LICENSE`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/README.md` & `poetry_plugin_package_info-0.2.4/README.md`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/__init__.py` & `poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/__init__.py`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/_zipfile.py` & `poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/_zipfile.py`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/formatters/__init__.py` & `poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/formatters/__init__.py`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/formatters/black.py` & `poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/formatters/black.py`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/generators/__init__.py` & `poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/generators/__init__.py`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/generators/git.py` & `poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/generators/git.py`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/generators/project.py` & `poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/generators/project.py`

 * *Files identical despite different names*

### Comparing `poetry_plugin_package_info-0.2.3/poetry_plugin_package_info/plugin.py` & `poetry_plugin_package_info-0.2.4/poetry_plugin_package_info/plugin.py`

 * *Files 3% similar despite different names*

```diff
@@ -757,34 +757,64 @@
             return list(builder._formats.values())  # noqa: SLF001
 
         raise ValueError(f"Unsupported format: {fmt}")  # noqa: TRY003
 
     def _determine_package_info_path(
         self,
         builder_instance: BaseBuilder,
-    ) -> Path:
+        out: IO,
+    ) -> Path | None:
         for include in builder_instance._module.includes:  # noqa: SLF001
             include.refresh()
 
             if (
                 isinstance(include, PackageInclude)
                 and include.source
                 and builder_instance.format == "wheel"
             ):
                 source_root = include.base
             else:
                 source_root = builder_instance._path  # noqa: SLF001
 
-            if source_root in self.package_info_absolute_file_path.parents:
+            if isinstance(include, PackageInclude):
+                include_path = source_root / include.package
+            else:
+                out.write_line(
+                    f"""\
+[{Fore.BLUE}poetry-plugin-package-info{Fore.RESET}]: \
+{Fore.RED}ERROR: Plugin does not yet support {include.__class__} includes so
+will skip '{builder_instance.format}' dist.\
+""",
+                )
+                return None
+            if (
+                include_path.is_dir()
+                and include_path
+                in self.package_info_absolute_file_path.parents
+            ) or (
+                not include_path.is_dir()
+                and include_path == self.package_info_absolute_file_path
+            ):
                 result = self.package_info_absolute_file_path.relative_to(
                     source_root,
                 )
                 if not builder_instance.is_excluded(result):
                     return result
 
+        if builder_instance.format == "wheel":
+            out.write_line(
+                f"""\
+[{Fore.BLUE}poetry-plugin-package-info{Fore.RESET}]: \
+{Fore.YELLOW}WARNING: '{self.package_info_relative_file_path}' is not \
+configured to be included in a package in '{builder_instance.format}' \
+distribution so will be skipped.\
+""",
+            )
+            return None
+
         return self.package_info_relative_file_path
 
     def handle_builder_type(
         self: "PackageInfoApplicationPlugin",
         builder_type: type[Builder],
         out: IO,
     ) -> None:
@@ -792,44 +822,48 @@
         format_all = "all" in self.patch_build_formats
         if issubclass(builder_type, WheelBuilder) and (
             builder_type.format in self.patch_build_formats or format_all
         ):
             builder_instance = builder_type(self.application.poetry)
             package_info_file_dist_path = self._determine_package_info_path(
                 builder_instance,
-            )
-            self.update_wheel(
-                Path(builder_instance.default_target_dir)
-                / builder_instance.wheel_filename,
-                package_info_file_dist_path,
                 out,
             )
+            if package_info_file_dist_path is not None:
+                self.update_wheel(
+                    Path(builder_instance.default_target_dir)
+                    / builder_instance.wheel_filename,
+                    package_info_file_dist_path,
+                    out,
+                )
         elif issubclass(builder_type, SdistBuilder) and (
             builder_type.format in self.patch_build_formats or format_all
         ):
             builder_instance = builder_type(self.application.poetry)
             dist_name = distribution_name(
                 self.application.poetry.package.name,
             )
             version = builder_instance._meta.version  # noqa: SLF001
             tar_file_name = f"{dist_name!s}-{version}.tar.gz"
             package_info_file_dist_path = self._determine_package_info_path(
                 builder_instance,
-            )
-            self.update_sdist(
-                builder_instance.default_target_dir / tar_file_name,
-                package_info_file_dist_path,
                 out,
             )
+            if package_info_file_dist_path is not None:
+                self.update_sdist(
+                    builder_instance.default_target_dir / tar_file_name,
+                    package_info_file_dist_path,
+                    out,
+                )
         elif format_all:
             distro_format = builder_type.format  # type: ignore[attr-defined]
             out.write_line(
                 f"""\
 [{Fore.BLUE}poetry-plugin-package-info{Fore.RESET}]: \
-{Fore.YELLOW}Skipped unsupported distribution format \
+{Fore.YELLOW}WARNING: Skipped unsupported distribution format \
 {distro_format}{Fore.RESET}\
 """,
             )
 
     def on_terminate(
         self: "PackageInfoApplicationPlugin",
         command: BuildCommand,
```

### Comparing `poetry_plugin_package_info-0.2.3/pyproject.toml` & `poetry_plugin_package_info-0.2.4/pyproject.toml`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "poetry-plugin-package-info"
-version = "0.2.3"
+version = "0.2.4"
 description = "Plugin for poetry that creates/updates an package_info.py file with various details about the project/package."
 authors = ["Ben Ellis <ben.ellis@softweyr.co.uk>"]
 license = "MIT"
 readme = "README.md"
 packages = [{ include = "poetry_plugin_package_info" }]
 homepage = "https://github.com/bellis/poetry-plugin-package-info"
 documentation = "https://github.com/bellis/poetry-plugin-package-info"
```

### Comparing `poetry_plugin_package_info-0.2.3/PKG-INFO` & `poetry_plugin_package_info-0.2.4/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: poetry-plugin-package-info
-Version: 0.2.3
+Version: 0.2.4
 Summary: Plugin for poetry that creates/updates an package_info.py file with various details about the project/package.
 Home-page: https://github.com/bellis/poetry-plugin-package-info
 License: MIT
 Author: Ben Ellis
 Author-email: ben.ellis@softweyr.co.uk
 Requires-Python: >=3.7,<4.0
 Classifier: Development Status :: 3 - Alpha
```

