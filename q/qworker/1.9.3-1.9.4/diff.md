# Comparing `tmp/qworker-1.9.3-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.zip` & `tmp/qworker-1.9.4-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.zip`

## zipinfo {}

```diff
@@ -1,37 +1,37 @@
-Zip file size: 320176 bytes, number of entries: 35
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-01 17:46 qworker.libs/
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-01 17:46 qw/
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-01 17:46 qworker-1.9.3.dist-info/
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-01 17:46 qw/executor/
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-01 17:46 qw/utils/
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-01 17:46 qw/queues/
-drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-01 17:46 qw/wrappers/
--rw-r--r--  2.0 unx     3025 b- defN 23-Jul-01 17:46 qw/conf.py
--rw-r--r--  2.0 unx      622 b- defN 23-Jul-01 17:46 qw/version.py
--rw-r--r--  2.0 unx      137 b- defN 23-Jul-01 17:46 qw/__init__.py
--rw-r--r--  2.0 unx     4129 b- defN 23-Jul-01 17:46 qw/protocols.py
--rw-r--r--  2.0 unx    18770 b- defN 23-Jul-01 17:46 qw/client.py
--rw-r--r--  2.0 unx     2160 b- defN 23-Jul-01 17:46 qw/discovery.py
--rw-r--r--  2.0 unx     8058 b- defN 23-Jul-01 17:46 qw/process.py
--rw-r--r--  2.0 unx    22230 b- defN 23-Jul-01 17:46 qw/server.py
--rw-r--r--  2.0 unx      380 b- defN 23-Jul-01 17:46 qw/decorators.py
--rwxr-xr-x  2.0 unx   568544 b- defN 23-Jul-01 17:46 qw/exceptions.cpython-39-x86_64-linux-gnu.so
--rw-r--r--  2.0 unx     2472 b- defN 23-Jul-01 17:46 qw/__main__.py
--rw-r--r--  2.0 unx     4265 b- defN 23-Jul-01 17:46 qw/executor/__init__.py
--rw-r--r--  2.0 unx       46 b- defN 23-Jul-01 17:46 qw/utils/__init__.py
--rw-r--r--  2.0 unx      512 b- defN 23-Jul-01 17:46 qw/utils/functions.py
--rwxr-xr-x  2.0 unx   434800 b- defN 23-Jul-01 17:46 qw/utils/json.cpython-39-x86_64-linux-gnu.so
--rw-r--r--  2.0 unx      597 b- defN 23-Jul-01 17:46 qw/utils/versions.py
--rw-r--r--  2.0 unx       62 b- defN 23-Jul-01 17:46 qw/queues/__init__.py
--rw-r--r--  2.0 unx     6118 b- defN 23-Jul-01 17:46 qw/queues/manager.py
--rw-r--r--  2.0 unx     1246 b- defN 23-Jul-01 17:46 qw/wrappers/func.py
--rw-r--r--  2.0 unx     4658 b- defN 23-Jul-01 17:46 qw/wrappers/di_task.py
--rw-r--r--  2.0 unx      320 b- defN 23-Jul-01 17:46 qw/wrappers/__init__.py
--rw-r--r--  2.0 unx     1483 b- defN 23-Jul-01 17:46 qw/wrappers/base.py
--rw-r--r--  2.0 unx     3170 b- defN 23-Jul-01 17:46 qworker-1.9.3.dist-info/METADATA
--rw-r--r--  2.0 unx       40 b- defN 23-Jul-01 17:46 qworker-1.9.3.dist-info/entry_points.txt
--rw-r--r--  2.0 unx     1070 b- defN 23-Jul-01 17:46 qworker-1.9.3.dist-info/LICENSE
--rw-r--r--  2.0 unx        3 b- defN 23-Jul-01 17:46 qworker-1.9.3.dist-info/top_level.txt
--rw-r--r--  2.0 unx      217 b- defN 23-Jul-01 17:46 qworker-1.9.3.dist-info/WHEEL
--rw-rw-r--  2.0 unx     2189 b- defN 23-Jul-01 17:46 qworker-1.9.3.dist-info/RECORD
-35 files, 1091323 bytes uncompressed, 316070 bytes compressed:  71.0%
+Zip file size: 320118 bytes, number of entries: 35
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-02 01:48 qworker.libs/
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-02 01:48 qw/
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-02 01:48 qworker-1.9.4.dist-info/
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-02 01:48 qw/executor/
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-02 01:48 qw/utils/
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-02 01:48 qw/queues/
+drwxr-xr-x  2.0 unx        0 b- stor 23-Jul-02 01:48 qw/wrappers/
+-rw-r--r--  2.0 unx     3025 b- defN 23-Jul-02 01:48 qw/conf.py
+-rw-r--r--  2.0 unx      622 b- defN 23-Jul-02 01:48 qw/version.py
+-rw-r--r--  2.0 unx      137 b- defN 23-Jul-02 01:48 qw/__init__.py
+-rw-r--r--  2.0 unx     4129 b- defN 23-Jul-02 01:48 qw/protocols.py
+-rw-r--r--  2.0 unx    18681 b- defN 23-Jul-02 01:48 qw/client.py
+-rw-r--r--  2.0 unx     2160 b- defN 23-Jul-02 01:48 qw/discovery.py
+-rw-r--r--  2.0 unx     8058 b- defN 23-Jul-02 01:48 qw/process.py
+-rw-r--r--  2.0 unx    22316 b- defN 23-Jul-02 01:48 qw/server.py
+-rw-r--r--  2.0 unx      380 b- defN 23-Jul-02 01:48 qw/decorators.py
+-rwxr-xr-x  2.0 unx   568544 b- defN 23-Jul-02 01:48 qw/exceptions.cpython-39-x86_64-linux-gnu.so
+-rw-r--r--  2.0 unx     2472 b- defN 23-Jul-02 01:48 qw/__main__.py
+-rw-r--r--  2.0 unx     4312 b- defN 23-Jul-02 01:48 qw/executor/__init__.py
+-rw-r--r--  2.0 unx       46 b- defN 23-Jul-02 01:48 qw/utils/__init__.py
+-rw-r--r--  2.0 unx      512 b- defN 23-Jul-02 01:48 qw/utils/functions.py
+-rwxr-xr-x  2.0 unx   434800 b- defN 23-Jul-02 01:48 qw/utils/json.cpython-39-x86_64-linux-gnu.so
+-rw-r--r--  2.0 unx      597 b- defN 23-Jul-02 01:48 qw/utils/versions.py
+-rw-r--r--  2.0 unx       62 b- defN 23-Jul-02 01:48 qw/queues/__init__.py
+-rw-r--r--  2.0 unx     6116 b- defN 23-Jul-02 01:48 qw/queues/manager.py
+-rw-r--r--  2.0 unx     1246 b- defN 23-Jul-02 01:48 qw/wrappers/func.py
+-rw-r--r--  2.0 unx     4658 b- defN 23-Jul-02 01:48 qw/wrappers/di_task.py
+-rw-r--r--  2.0 unx      320 b- defN 23-Jul-02 01:48 qw/wrappers/__init__.py
+-rw-r--r--  2.0 unx     1483 b- defN 23-Jul-02 01:48 qw/wrappers/base.py
+-rw-r--r--  2.0 unx     3170 b- defN 23-Jul-02 01:48 qworker-1.9.4.dist-info/METADATA
+-rw-r--r--  2.0 unx       40 b- defN 23-Jul-02 01:48 qworker-1.9.4.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx     1070 b- defN 23-Jul-02 01:48 qworker-1.9.4.dist-info/LICENSE
+-rw-r--r--  2.0 unx        3 b- defN 23-Jul-02 01:48 qworker-1.9.4.dist-info/top_level.txt
+-rw-r--r--  2.0 unx      217 b- defN 23-Jul-02 01:48 qworker-1.9.4.dist-info/WHEEL
+-rw-rw-r--  2.0 unx     2189 b- defN 23-Jul-02 01:48 qworker-1.9.4.dist-info/RECORD
+35 files, 1091365 bytes uncompressed, 316012 bytes compressed:  71.0%
```

## zipnote {}

```diff
@@ -1,14 +1,14 @@
 Filename: qworker.libs/
 Comment: 
 
 Filename: qw/
 Comment: 
 
-Filename: qworker-1.9.3.dist-info/
+Filename: qworker-1.9.4.dist-info/
 Comment: 
 
 Filename: qw/executor/
 Comment: 
 
 Filename: qw/utils/
 Comment: 
@@ -81,26 +81,26 @@
 
 Filename: qw/wrappers/__init__.py
 Comment: 
 
 Filename: qw/wrappers/base.py
 Comment: 
 
-Filename: qworker-1.9.3.dist-info/METADATA
+Filename: qworker-1.9.4.dist-info/METADATA
 Comment: 
 
-Filename: qworker-1.9.3.dist-info/entry_points.txt
+Filename: qworker-1.9.4.dist-info/entry_points.txt
 Comment: 
 
-Filename: qworker-1.9.3.dist-info/LICENSE
+Filename: qworker-1.9.4.dist-info/LICENSE
 Comment: 
 
-Filename: qworker-1.9.3.dist-info/top_level.txt
+Filename: qworker-1.9.4.dist-info/top_level.txt
 Comment: 
 
-Filename: qworker-1.9.3.dist-info/WHEEL
+Filename: qworker-1.9.4.dist-info/WHEEL
 Comment: 
 
-Filename: qworker-1.9.3.dist-info/RECORD
+Filename: qworker-1.9.4.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## qw/conf.py

```diff
@@ -14,15 +14,15 @@
 WORKER_DEFAULT_PORT = config.getint('WORKER_DEFAULT_PORT', fallback=8888)
 WORKER_DEFAULT_QTY = config.getint('WORKER_DEFAULT_QTY', fallback=4)
 WORKER_QUEUE_SIZE = config.getint('WORKER_QUEUE_SIZE', fallback=8)
 RESOURCE_THRESHOLD = config.getint('RESOURCE_THRESHOLD', fallback=90)
 CHECK_RESOURCE_USAGE = config.getboolean('CHECK_RESOURCE_USAGE', fallback=True)
 WORKER_RETRY_INTERVAL = config.getint('WORKER_RETRY_INTERVAL', fallback=10)
 WORKER_RETRY_COUNT = config.getint('WORKER_RETRY_COUNT', fallback=2)
-WORKER_CONCURRENCY_NUMBER = config.getint('WORKER_CONCURRENCY_NUMBER', fallback=4)
+WORKER_CONCURRENCY_NUMBER = config.getint('WORKER_CONCURRENCY_NUMBER', fallback=8)
 WORKER_TASK_TIMEOUT = config.getint('WORKER_TASK_TIMEOUT', fallback=30)
 
 ## Queue Consumed Callback
 WORKER_QUEUE_CALLBACK = config.get(
     'WORKER_QUEUE_CALLBACK', fallback=None
 )
```

## qw/version.py

```diff
@@ -2,15 +2,15 @@
    QueueWorker is a asyncio-based Worker for distributed functions.
 """
 
 __title__ = 'qworker'
 __description__ = ('QueueWorker is asynchronous Task Queue implementation '
                    'built on top of Asyncio.'
                    'Can you spawn distributed workers to run functions inside workers.')
-__version__ = '1.9.3'
+__version__ = '1.9.4'
 __author__ = 'Jesus Lara'
 __author_email__ = 'jesuslarag@gmail.com'
 __license__ = 'MIT'
 
 def get_version() -> tuple:  # pragma: no cover
     """ Get Queue Worker version as tuple.
     """
```

## qw/client.py

```diff
@@ -11,15 +11,14 @@
 from collections import defaultdict
 from functools import partial
 from redis import asyncio as aioredis
 import pickle
 import cloudpickle
 import jsonpickle
 import orjson
-import uvloop
 from navconfig.logging import logging
 from qw.discovery import get_client_discovery
 from qw.utils import make_signature
 from qw.exceptions import (
     ParserError,
     QWException,
     DiscardedTask
@@ -34,18 +33,14 @@
     WORKER_SECRET_KEY,
     expected_message
 )
 from .process import QW_WORKER_LIST
 from .wrappers import FuncWrapper, TaskWrapper
 
 
-asyncio.set_event_loop_policy(uvloop.EventLoopPolicy())
-uvloop.install()
-
-
 MAX_RETRY_COUNT = 5
 WAIT_TIME = 0.1  # seconds
 
 
 # TODO: select a non-busy Worker
 def random_worker(workers):
     """Picks next worker uniformly at random."""
```

## qw/server.py

```diff
@@ -160,14 +160,18 @@
                                     )
                                 # If processing raises an exception, the next line won't be executed
                                 await self.redis.xack(
                                     REDIS_WORKER_STREAM,
                                     REDIS_WORKER_GROUP,
                                     _id
                                 )
+                                self.logger.info(
+                                    f":: TASK {task} was acknowledged by Worker {self._name} \
+                                    from {REDIS_WORKER_STREAM} at {int(time.time())}"
+                                )
                             except Exception as e:
                                 self.logger.error(f"Error processing message: {e}")
                     await asyncio.sleep(0.001)  # sleep a bit to prevent high CPU usage
                 except ConnectionResetError:
                     self.logger.error(
                         "Connection was closed, trying to reconnect."
                     )
@@ -358,15 +362,15 @@
             writer=writer
         )
 
     async def discard_task(self, message: str, writer: asyncio.StreamWriter):
         exc = DiscardedTask(
             message
         )
-        self.logger.critical(message, stack_info=True)
+        self.logger.error(message)
         result = cloudpickle.dumps(exc)
         await self.closing_writer(
             writer,
             result
         )
         return False
 
@@ -467,15 +471,15 @@
                 task.id = uid
                 await self.queue.put(
                     task, id=task.id
                 )
                 return f'Task {task!s} with id {uid} was queued.'.encode('utf-8')
             except asyncio.QueueFull:
                 return await self.discard_task(
-                    f"Worker {self.name!s} Queue is Full, discarding Task {task!r}"
+                    f"Queue in {self.name!s} is Full, discarding Task {task!r}"
                 )
         else:
             result = None
             try:
                 # executed and send result to client
                 executor = TaskExecutor(task)
                 result = await executor.run()
@@ -586,18 +590,14 @@
     async def closing_writer(self, writer: asyncio.StreamWriter, result):
         """Sending results and closing the streamer."""
         try:
             writer.write(result)
             await writer.drain()
             if writer.can_write_eof():
                 writer.write_eof()
-            if self.debug is True:
-                cPrint(
-                    f"Closing client socket, pid: {self._pid}", level='DEBUG'
-                )
             writer.close()
         except Exception as e:
             self.logger.error(
                 f"Error while closing writer: {str(e)}"
             )
```

## qw/executor/__init__.py

```diff
@@ -93,15 +93,16 @@
             loop = asyncio.get_event_loop()
         try:
             if type(self.task) in (FuncWrapper, QueueWrapper):
                 self.logger.notice(
                     f"Running Function: {self.task}"
                 )
                 self.task.set_loop(loop)
-                result = await self.task()
+                async with self.semaphore:
+                    result = await self.task()
             elif isinstance(self.task, TaskWrapper):
                 self.logger.info(
                     f"Running Task: {self.task}"
                 )
                 self.task.set_loop(loop)
                 async with self.semaphore:
                     result = await self.run_task()
```

## qw/queues/manager.py

```diff
@@ -131,15 +131,15 @@
         return task
 
     async def queue_handler(self):
         """Method for handling the tasks received by the connection handler."""
         while True:
             result = None
             task = await self.queue.get()
-            self.logger.notice(
+            self.logger.info(
                 f"Task started {task} on {self.worker_name}"
             )
             ### Process Task:
             try:
                 executor = TaskExecutor(task)
                 result = await executor.run()
                 if type(result) == asyncio.TimeoutError:
```

## Comparing `qworker-1.9.3.dist-info/METADATA` & `qworker-1.9.4.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: qworker
-Version: 1.9.3
+Version: 1.9.4
 Summary: QueueWorker is asynchronous Task Queue implementation built on top of Asyncio.Can you spawn distributed workers to run functions inside workers.
 Home-page: https://github.com/phenobarbital/qworker
 Author: Jesus Lara
 Author-email: jesuslara@phenobarbital.info
 License: MIT
 Project-URL: Source, https://github.com/phenobarbital/qworker
 Project-URL: Funding, https://paypal.me/phenobarbital
```

## Comparing `qworker-1.9.3.dist-info/LICENSE` & `qworker-1.9.4.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `qworker-1.9.3.dist-info/RECORD` & `qworker-1.9.4.dist-info/RECORD`

 * *Files 24% similar despite different names*

```diff
@@ -1,28 +1,28 @@
-qw/conf.py,sha256=Fxx8-LNyeuN4PfQEiWlcAYzyqJXGNw8fsif2L_Qc2hE,3025
-qw/version.py,sha256=GbT827qHZIjosQhscIikKggNxlx4cJ8D4iG0kx7U_FA,622
+qw/conf.py,sha256=Snq4rBPQWBjt8WD2AZihf7ulj-ELqNhJIj-aRQHHUQM,3025
+qw/version.py,sha256=oXNZmLgrn166Wre49mnBQklUyP9jASCu7Tu9PKUvYFI,622
 qw/__init__.py,sha256=awMNjg7WGznbrNuJLoEJV6BbnREk4BPD8k9My8BD7Uo,137
 qw/protocols.py,sha256=I57MsY72OlVlGFT1-ggZCm4nWAd89m4m5YEwGUWGAmg,4129
-qw/client.py,sha256=VQWeVZh55-Nb3gQwVdKgwbxGKa8VTk_0QGNYsoasxvo,18770
+qw/client.py,sha256=LxPM7M58e0q2ZoY3D_DtoYtqX8B1zU32XaUDmb_D5v0,18681
 qw/discovery.py,sha256=l_Lb3Bmni6WTTu5fxzj4-9KquiRak1rq8k9I70f_hSI,2160
 qw/process.py,sha256=TnA7JKqMmWaLQCKQEFY3A8Q1poC0cMtpsHuB412OJgw,8058
-qw/server.py,sha256=lF6lkE6IYiwdHh26W-2WVGrtWEPQ6b6qFq8unnwDMoE,22230
+qw/server.py,sha256=AayTXWM5HEw4sYndYoMvfMafbaXfJP8j3ByLfTckc8U,22316
 qw/decorators.py,sha256=lL5CN9a7gUi8iDEfOI7kSpABkScu5cE99yj9eYGn69w,380
 qw/exceptions.cpython-39-x86_64-linux-gnu.so,sha256=IYBQ4BGCKA3duo8PEQylQhSS4BTYgAJ_rNjMOWU2nf0,568544
 qw/__main__.py,sha256=H52Hv_ll_8Nwnbj4UAhGfe3bfCbAhYAdH6f5Y3kbpFo,2472
-qw/executor/__init__.py,sha256=3ggAsCVXZnimnhOcs5aLUHJZRV-A7vqNd46ScvmM-mY,4265
+qw/executor/__init__.py,sha256=a1u8x1LGrY_CJb7huvGipAUXxKsDdgH2lW_Xmn50GbI,4312
 qw/utils/__init__.py,sha256=bYf_I4ymTf8vsqMjK00NJi2-A-lVijPTwN6HDOVjcjQ,46
 qw/utils/functions.py,sha256=9iXVvYLtQzOK0tRecOV2Oqrl-2raxAHwBCNilLui1xQ,512
 qw/utils/json.cpython-39-x86_64-linux-gnu.so,sha256=jHsLujozPguK1eL9t-Grw2KYTVlZvo4k7rLtF8a6YuU,434800
 qw/utils/versions.py,sha256=d8AdLmhM1bPc82vTAshCJBljGr-Ur3_hiZ_GtTbbORA,597
 qw/queues/__init__.py,sha256=itGqt8q7feqZePbUWJTeA82Q2AwU0B2agUFXRmpLuDc,62
-qw/queues/manager.py,sha256=cvCelTe7UoP_KnGZbsBQewq07M-n7mdQVOjbJnmlv70,6118
+qw/queues/manager.py,sha256=PfUGOT5o8QwgBQBKwfc619MtLkceh2QpbnNLRRwOc2c,6116
 qw/wrappers/func.py,sha256=sL43tB6BWPbz-iOpkySTaOIpGtd6J1F37R8V7WfwcE8,1246
 qw/wrappers/di_task.py,sha256=p1Yfa_rqDJ5w6VR8XtP9fKp8PvvndzJL08Izc1W60OE,4658
 qw/wrappers/__init__.py,sha256=Ot_f0GTaDB50Za4Hxsz2FZSkZDn4zZoDHjXOvqj9T9k,320
 qw/wrappers/base.py,sha256=2gazsxzyqwJOjopfJZsRX9Lif6o4upusAKkvrUIQoBM,1483
-qworker-1.9.3.dist-info/METADATA,sha256=jqW29jjJStVui4OmY0IQOz2ZZLkRWdDFdmGt6MTJ6NU,3170
-qworker-1.9.3.dist-info/entry_points.txt,sha256=ooHTYYyEjHI9Rj79mHQmU_s4HP-PTvD3g3xSa26vIGc,40
-qworker-1.9.3.dist-info/LICENSE,sha256=EW8vB8vWRFvBxGC3soG2HCxkuNrQpOGUgNFd81h7u54,1070
-qworker-1.9.3.dist-info/top_level.txt,sha256=2NxbFCeI_G1kzzf628VnbDchanCX6rcTJORdENY-rHI,3
-qworker-1.9.3.dist-info/WHEEL,sha256=G1-Tt_WO10x9oXjmzv4wXxMLbyVnQaK1ig1QydJbPuA,217
-qworker-1.9.3.dist-info/RECORD,,
+qworker-1.9.4.dist-info/METADATA,sha256=bdcnRp9KVjlqFKYwt_LUhhfU4Brp0whH5qjznXhqmFU,3170
+qworker-1.9.4.dist-info/entry_points.txt,sha256=ooHTYYyEjHI9Rj79mHQmU_s4HP-PTvD3g3xSa26vIGc,40
+qworker-1.9.4.dist-info/LICENSE,sha256=EW8vB8vWRFvBxGC3soG2HCxkuNrQpOGUgNFd81h7u54,1070
+qworker-1.9.4.dist-info/top_level.txt,sha256=2NxbFCeI_G1kzzf628VnbDchanCX6rcTJORdENY-rHI,3
+qworker-1.9.4.dist-info/WHEEL,sha256=G1-Tt_WO10x9oXjmzv4wXxMLbyVnQaK1ig1QydJbPuA,217
+qworker-1.9.4.dist-info/RECORD,,
```

